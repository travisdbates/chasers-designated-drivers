[build]
  command = "npm run build"
  publish = "dist"

[[headers]]
  for = "/_astro/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[build.environment]
  NODE_VERSION = "18"

# Exclude files from secrets scanning
[build.processing.secrets]
  enabled = true
  omit_paths = [
    ".env.example",
    "micamp-api.html",
    "PAYMENT_SETUP.md",
    "PAYMENT_STATUS.md",
    "temp-api-backup/**",
    ".netlify/**",
    "dist/**"
  ]
  # Omit specific keys - these are intentionally public or in example files
  omit_keys = [
    "PUBLIC_ACCEPTBLUE_ENVIRONMENT",
    "PUBLIC_ACCEPTBLUE_TOKENIZATION_KEY",
    "PUBLIC_MICAMP_BASE_URL",
    "ACCEPTBLUE_ENVIRONMENT"
  ]
