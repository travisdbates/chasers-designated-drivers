---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navigation from '../../components/Navigation.astro';
import PlanSummary from '../../components/PlanSummary.astro';
import SecurePaymentForm from '../../components/SecurePaymentForm.astro';
import { getPlanById } from '../../config/plans.ts';

const selectedPlan = getPlanById('corporate');
---

<BaseLayout 
  title={`Checkout - ${selectedPlan.name} | Chasers DD`}
  description={`Complete your ${selectedPlan.name} membership signup with secure payment processing.`}
  keywords="checkout, payment, membership signup, secure payment"
>
  <Navigation />
  
  <main class="min-h-screen bg-gradient-to-b from-gray-50 to-white py-16">
    <div class="max-w-7xl mx-auto px-2 sm:px-3 lg:px-4">
      <!-- Page Header -->
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
          <span class="font-serif">Secure</span>
          <span class="text-gold-primary ml-3">Checkout</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          Complete your membership signup with our secure payment system
        </p>
      </div>

      <!-- Plan Summary Section -->
      <PlanSummary plan={selectedPlan} />

      <!-- Secure Payment Form -->
      <div class="max-w-4xl mx-auto">
        <SecurePaymentForm 
          planId={selectedPlan.id}
          plan={selectedPlan} 
          onBack="goBackToMembership"
        />
      </div>
    </div>
  </main>
</BaseLayout>

<script>
  // Custom back handler for this page
  window.goBackToMembership = () => {
    window.location.href = '/membership';
  };
</script>